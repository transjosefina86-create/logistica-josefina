<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Panel Administrativo - Transporte La Josefina</title>
    
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    
    <style>
        :root {
            --naranja: #ff6600;
            --oscuro: #1a1a1a;
            --gris-fondo: #f4f4f4;
            --rojo: #dc3545;
            --verde: #28a745;
            --azul: #007bff;
            --blanco: #ffffff;
            --gris-borde: #dddddd;
        }

        /* RESET GENERAL */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--gris-fondo);
            margin: 0;
            padding: 0;
            color: #333;
            overflow-x: hidden;
        }

        /* PANTALLA DE INGRESO */
        #login-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, var(--oscuro) 0%, #333 100%);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            transition: opacity 0.5s ease;
        }

        .logo-login {
            font-size: 60px;
            font-weight: 900;
            color: var(--naranja);
            text-shadow: 4px 4px 0px #000;
            text-align: center;
            line-height: 0.9;
            margin-bottom: 50px;
            letter-spacing: -2px;
        }

        .login-card {
            background: rgba(255,255,255,0.05);
            padding: 40px;
            border-radius: 20px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.1);
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .input-login {
            padding: 20px;
            font-size: 24px;
            border-radius: 15px;
            border: 2px solid transparent;
            text-align: center;
            width: 280px;
            margin-bottom: 30px;
            background: white;
            color: #000;
            box-shadow: 0 10px 25px rgba(0,0,0,0.5);
            outline: none;
            transition: 0.3s;
        }

        .input-login:focus {
            border-color: var(--naranja);
        }

        /* HEADER Y ESTRUCTURA */
        #contenido-principal {
            display: none;
            padding: 30px;
            max-width: 1600px;
            margin: 0 auto;
        }

        .header {
            background: #222;
            color: white;
            padding: 25px 40px;
            border-radius: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 6px solid var(--naranja);
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            margin-bottom: 30px;
        }

        .header h2 {
            margin: 0;
            font-size: 28px;
            font-weight: 900;
            letter-spacing: 1px;
            text-transform: uppercase;
        }

        /* TABLAS ESTILO PREMIUM */
        .tabla-contenedor {
            background: var(--blanco);
            border-radius: 20px;
            padding: 20px;
            box-shadow: 0 15px 40px rgba(0,0,0,0.08);
            border: 1px solid var(--gris-borde);
            overflow: hidden;
        }

        table {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0;
        }

        th {
            background: #f8f9fa;
            color: #666;
            padding: 20px 15px;
            text-align: left;
            font-size: 11px;
            font-weight: 800;
            text-transform: uppercase;
            letter-spacing: 1.5px;
            border-bottom: 2px solid #eee;
        }

        td {
            padding: 18px 15px;
            border-bottom: 1px solid #f0f0f0;
            font-size: 14px;
            font-weight: 500;
            color: #444;
        }

        tr:last-child td { border-bottom: none; }
        tr:hover td { background-color: #fcfcfc; }

        /* ESTADOS COLOREADOS */
        .txt-vacio { 
            color: var(--verde) !important; 
            font-weight: 900; 
            background: rgba(40, 167, 69, 0.1);
            padding: 8px 12px;
            border-radius: 8px;
            border: 1px solid var(--verde);
        }
        
        .txt-cargado { 
            color: var(--rojo) !important; 
            font-weight: 900;
            background: rgba(220, 53, 69, 0.1);
            padding: 8px 12px;
            border-radius: 8px;
            border: 1px solid var(--rojo);
        }

        /* BOTONERA GENERAL */
        .btn-crear {
            background: var(--naranja);
            color: white;
            border: none;
            padding: 14px 28px;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 800;
            transition: all 0.3s ease;
            text-transform: uppercase;
            font-size: 13px;
            box-shadow: 0 4px 15px rgba(255, 102, 0, 0.3);
        }

        .btn-crear:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(255, 102, 0, 0.4);
            background: #ff751a;
        }

        .btn-rojo {
            background: var(--rojo);
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            transition: 0.2s;
        }

        .btn-rojo:hover { background: #c82333; }

        /* MODALES DISE√ëO COMPLETO */
        .modal {
            display: none;
            position: fixed;
            z-index: 10000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.9);
            backdrop-filter: blur(8px);
            overflow-y: auto;
        }

        .modal-content {
            background: white;
            margin: 2% auto;
            padding: 40px;
            width: 95%;
            max-width: 1000px;
            border-radius: 30px;
            position: relative;
            box-shadow: 0 25px 60px rgba(0,0,0,0.5);
        }

        .ficha-edit {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            background: #fdfdfd;
            padding: 30px;
            border: 2px solid #eee;
            border-radius: 20px;
            margin-top: 20px;
        }

        .ficha-edit div {
            display: flex;
            flex-direction: column;
        }

        .ficha-edit label {
            color: var(--naranja);
            font-size: 12px;
            font-weight: 900;
            text-transform: uppercase;
            margin-bottom: 8px;
            margin-left: 5px;
        }

        .ficha-edit input {
            padding: 15px;
            border: 2px solid #eee;
            border-radius: 12px;
            font-size: 16px;
            font-weight: bold;
            transition: 0.3s;
            outline: none;
        }

        .ficha-edit input:focus {
            border-color: var(--naranja);
            background: #fffcf9;
        }

        /* CONTROLES VISOR IMAGEN MULTIFOTO */
        .visor-controles {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
            background: #f4f4f4;
            padding: 25px;
            border-radius: 20px;
            margin-bottom: 25px;
            border: 1px solid #ddd;
        }

        .control-group {
            display: flex;
            flex-direction: column;
            font-weight: 800;
            font-size: 12px;
            color: #555;
        }

        .control-group input[type=range] {
            margin-top: 10px;
            cursor: pointer;
        }

        #visor-foto {
            background: #111;
            padding: 20px;
            border-radius: 25px;
            text-align: center;
            min-height: 550px;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
            border: 5px solid #222;
        }

        .img-ticket-render {
            max-width: 100%;
            max-height: 700px;
            box-shadow: 0 0 40px rgba(0,0,0,0.8);
            transition: filter 0.1s ease;
        }

        /* GESTI√ìN DE ACCESOS */
        #box-gestion {
            display: none;
            background: #fff;
            padding: 35px;
            border-radius: 25px;
            border: 3px solid var(--naranja);
            margin-bottom: 30px;
            box-shadow: 0 20px 50px rgba(0,0,0,0.15);
        }

        .btn-guardar-master {
            background: var(--verde);
            color: white;
            border: none;
            padding: 20px;
            width: 100%;
            border-radius: 15px;
            font-weight: 900;
            margin-top: 30px;
            cursor: pointer;
            font-size: 18px;
            text-transform: uppercase;
            box-shadow: 0 10px 20px rgba(40, 167, 69, 0.3);
            transition: 0.3s;
        }

        .btn-guardar-master:hover {
            background: #218838;
            transform: scale(1.01);
        }
    </style>
</head>
<body>

    <div id="login-overlay">
        <div class="logo-login">TRANSPORTE<br>LA JOSEFINA</div>
        <div class="login-card">
            <input type="password" id="pin-input" class="input-login" placeholder="PIN DE SEGURIDAD" onkeypress="if(event.key==='Enter') verificarLogin()">
            <button class="btn-crear" onclick="verificarLogin()" style="width: 100%; padding: 20px;">ENTRAR AL SISTEMA</button>
        </div>
    </div>

    <div id="contenido-principal">
        <div class="header">
            <div>
                <span style="color: var(--naranja); font-weight: 900;">ADMINISTRACI√ìN CENTRAL</span>
                <h2>GESTI√ìN DE CARGAS LA JOSEFINA</h2>
            </div>
            <button class="btn-crear" onclick="toggleGestion()">‚öôÔ∏è CONFIGURAR ACCESOS</button>
        </div>

        <div id="box-gestion">
            <h3 style="margin-top:0; color: var(--oscuro); font-weight: 900; text-transform: uppercase;">A√±adir Nuevo Acceso a Chofer</h3>
            <div style="display:grid; grid-template-columns: 1fr 1fr 1fr auto; gap: 20px;">
                <div style="display:flex; flex-direction:column;">
                    <label style="font-size:10px; font-weight:900; color:var(--naranja);">NOMBRE DEL CHOFER</label>
                    <input type="text" id="u-nom" placeholder="Ej: Juan Perez" style="padding:15px; border-radius:10px; border:1px solid #ddd;">
                </div>
                <div style="display:flex; flex-direction:column;">
                    <label style="font-size:10px; font-weight:900; color:var(--naranja);">PIN ASIGNADO</label>
                    <input type="text" id="u-pin" placeholder="Ej: 4455" style="padding:15px; border-radius:10px; border:1px solid #ddd;">
                </div>
                <div style="display:flex; flex-direction:column;">
                    <label style="font-size:10px; font-weight:900; color:var(--naranja);">WHATSAPP (CON 549)</label>
                    <input type="text" id="u-tel" placeholder="Ej: 549351..." style="padding:15px; border-radius:10px; border:1px solid #ddd;">
                </div>
                <button class="btn-crear" onclick="guardarChofer()" style="height: 52px; margin-top: 18px;">REGISTRAR</button>
            </div>

            <div class="tabla-contenedor" style="margin-top:30px; border-radius: 15px;">
                <table class="tabla-gestion">
                    <thead>
                        <tr>
                            <th>IDENTIFICACI√ìN</th>
                            <th>CLAVE PIN</th>
                            <th>N√öMERO TELEF√ìNICO</th>
                            <th>ADMINISTRAR</th>
                        </tr>
                    </thead>
                    <tbody id="lista-choferes-gestion"></tbody>
                </table>
            </div>
        </div>

        <div class="tabla-contenedor">
            <table>
                <thead>
                    <tr>
                        <th>FECHA Y HORA REGISTRO</th>
                        <th>ESTADO CARGA</th>
                        <th>NOMBRE CHOFER</th>
                        <th>EMPRESA TRANSPORTE</th>
                        <th>DATOS</th>
                        <th>FOTO TICKET</th>
                        <th>ACCIONES</th>
                    </tr>
                </thead>
                <tbody id="lista-reportes"></tbody>
            </table>
        </div>
    </div>

    <div id="modalDatos" class="modal">
        <div class="modal-content">
            <span style="float:right; cursor:pointer; font-size:40px; font-weight:900; color:var(--rojo);" onclick="cerrarModales()">√ó</span>
            <h2 style="border-bottom: 4px solid var(--naranja); padding-bottom:15px; margin-top:0;">CORRECCI√ìN DE DATOS DE VIAJE</h2>
            <div id="ficha-edit" class="ficha-edit"></div>
            
            <div style="margin-top:20px; padding:20px; background:#f0f7ff; border:2px dashed var(--azul); border-radius:20px;">
                <label style="font-weight:900; color:var(--azul); font-size:11px; display:block; margin-bottom:10px;">üîÑ SUBIR FOTO RECIBIDA POR WHATSAPP (SE SUMAR√Å AL REPORTE)</label>
                <input type="file" id="up-foto-parche" accept="image/*">
            </div>

            <button class="btn-guardar-master" onclick="guardarEdicion()">üíæ GUARDAR INFORMACI√ìN Y SINCRONIZAR</button>
        </div>
    </div>

    <div id="modalPDF" class="modal">
        <div class="modal-content">
            <span style="float:right; cursor:pointer; font-size:40px; font-weight:900; color:var(--rojo);" onclick="cerrarModales()">√ó</span>
            <h2 style="margin-top:0;">VISOR Y PROCESADOR DE TICKET</h2>
            <div class="visor-controles">
                <div class="control-group">BRILLO <input type="range" id="brillo" min="50" max="250" value="100" oninput="aplicarScanner()"></div>
                <div class="control-group">CONTRASTE <input type="range" id="contraste" min="50" max="350" value="100" oninput="aplicarScanner()"></div>
                <div class="control-group">LIMPIEZA HOJA <input type="range" id="limpieza" min="0" max="100" value="0" oninput="aplicarScanner()"></div>
                <div class="control-group">INTENSIDAD COLOR <input type="range" id="tinta" min="0" max="100" value="0" oninput="aplicarScanner()"></div>
            </div>
            <div id="visor-foto">
                </div>
            <div style="display:flex; gap:20px; margin-top:30px;">
                <button class="btn-guardar-master" onclick="descargarPDF()" style="flex:2; margin-top:0;">üì• DESCARGAR PDF FORMATO A4</button>
                <button class="btn-guardar-master" onclick="pedirReenvio()" style="background:var(--verde); flex:1; margin-top:0; display:flex; align-items:center; justify-content:center; gap:10px;">
                    <img src="https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg" width="20" style="filter: brightness(0) invert(1);"> RECLAMAR
                </button>
            </div>
        </div>
    </div>

    <script>
        const firebaseConfig = { apiKey: "AIzaSyC...", authDomain: "control-logistica-2026.firebaseapp.com", projectId: "control-logistica-2026", appId: "1:389274295324:web:04467597157833633e467d" };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();
        let actual = null, idEditando = "";

        window.onload = () => {
            if(localStorage.getItem('admin_josefina_session') === "active_1234") ingresarAlSistema();
        };

        function verificarLogin() {
            const p = document.getElementById('pin-input').value;
            if(p === "1234") {
                localStorage.setItem('admin_josefina_session', "active_1234");
                ingresarAlSistema();
            } else { alert("PIN INCORRECTO"); }
        }

        function ingresarAlSistema() {
            document.getElementById('login-overlay').style.opacity = '0';
            setTimeout(() => {
                document.getElementById('login-overlay').style.display = 'none';
                document.getElementById('contenido-principal').style.display = 'block';
                limpiarViejos();
                cargarDatos();
                cargarChoferes();
            }, 500);
        }

        async function limpiarViejos() {
            const limite = new Date();
            const snap = await db.collection("reportes").where("estado", "==", "CARGADO").get();
            snap.forEach(async (doc) => {
                const d = doc.data();
                if (d.fecha) {
                    const [f, h] = d.fecha.split(', ');
                    const iso = f.split('/').reverse().join('-') + 'T' + h;
                    if ((limite - new Date(iso)) / 3600000 >= 48) await db.collection("reportes").doc(doc.id).delete();
                }
            });
        }

        function cargarDatos() {
            db.collection("reportes").onSnapshot(snap => {
                const l = document.getElementById('lista-reportes'); l.innerHTML = "";
                let reportes = [];
                snap.forEach(doc => {
                    let d = doc.data();
                    if(!d.fecha) {
                        const ahora = new Date();
                        d.fecha = ahora.toLocaleDateString('es-AR') + ", " + ahora.toLocaleTimeString('es-AR', {hour:'2-digit', minute:'2-digit'});
                        db.collection("reportes").doc(doc.id).update({fecha: d.fecha});
                    }
                    reportes.push({id: doc.id, ...d});
                });
                
                reportes.sort((a,b) => {
                    if (a.estado === 'VAC√çO' && b.estado === 'CARGADO') return -1;
                    if (a.estado === 'CARGADO' && b.estado === 'VAC√çO') return 1;
                    return (a.fecha || '').localeCompare(b.fecha || '');
                });

                reportes.forEach(d => {
                    const cl = d.estado === 'VAC√çO' ? 'txt-vacio' : 'txt-cargado';
                    const numFotos = Array.isArray(d.fotos) ? d.fotos.length : (d.fotos ? 1 : 0);
                    const btnTicket = numFotos > 0 
                        ? `<button class="btn-crear" style="background:#444; padding:8px 15px; font-size:10px;" onclick="verP('${d.id}')">VISUALIZAR (${numFotos})</button>` 
                        : '---';

                    l.innerHTML += `<tr>
                        <td><span style="background:#eee; padding:5px 10px; border-radius:5px; font-weight:bold; font-size:12px;">${d.fecha}</span></td>
                        <td>
                            <select onchange="cambiarEstado('${d.id}',this.value)" class="${cl}">
                                <option value="VAC√çO" ${d.estado=='VAC√çO'?'selected':''}>VAC√çO</option>
                                <option value="CARGADO" ${d.estado=='CARGADO'?'selected':''}>CARGADO</option>
                            </select>
                        </td>
                        <td><b>${d.chofer_nombre || ''}</b></td>
                        <td>${d.transporte || ''}</td>
                        <td><button class="btn-crear" style="padding:8px 15px; font-size:10px;" onclick="verD('${d.id}')">EDITAR</button></td>
                        <td>${btnTicket}</td>
                        <td><button class="btn-rojo" onclick="eliminarReporte('${d.id}')">üóëÔ∏è</button></td>
                    </tr>`;
                });
            });
        }

        function aplicarScanner() {
            const b = document.getElementById('brillo').value, c = document.getElementById('contraste').value, l = document.getElementById('limpieza').value, t = document.getElementById('tinta').value;
            const f = `grayscale(100%) brightness(${b}%) contrast(${c}%) brightness(${100 + parseInt(l)}%) saturate(${100 + parseInt(t)}%)`;
            document.querySelectorAll('.img-ticket-render').forEach(img => img.style.filter = f);
        }

        async function verP(id) {
            const doc = await db.collection("reportes").doc(id).get(); 
            actual = {id: doc.id, ...doc.data()};
            const v = document.getElementById('visor-foto');
            v.innerHTML = "";
            
            const list = Array.isArray(actual.fotos) ? actual.fotos : [actual.fotos];
            list.forEach(src => {
                const img = document.createElement('img');
                img.src = src;
                img.className = 'img-ticket-render';
                v.appendChild(img);
            });

            document.getElementById('modalPDF').style.display = 'block';
            document.getElementById('brillo').value = 100; document.getElementById('contraste').value = 100; document.getElementById('limpieza').value = 0; document.getElementById('tinta').value = 0;
            setTimeout(aplicarScanner, 100);
        }

        async function verD(id) {
            idEditando = id;
            const doc = await db.collection("reportes").doc(id).get(); const d = doc.data();
            document.getElementById('ficha-edit').innerHTML = `
                <div><label>Nombre Empresa Transporte</label><input type="text" id="ed-trans" value="${d.transporte || ''}"></div>
                <div><label>CUIT de la Empresa</label><input type="text" id="ed-cuit" value="${d.cuit_trans || ''}"></div>
                <div><label>Nombre Completo Chofer</label><input type="text" id="ed-nom" value="${d.chofer_nombre || ''}"></div>
                <div><label>CUIL del Chofer</label><input type="text" id="ed-cuil" value="${d.chofer_cuil || ''}"></div>
                <div><label>Patente del Chasis</label><input type="text" id="ed-cha" value="${d.chasis || ''}"></div>
                <div><label>Patente del Acoplado</label><input type="text" id="ed-aco" value="${d.acoplado || ''}"></div>
                <div style="grid-column: span 2"><label>Tipo de Equipo / Semirremolque</label><input type="text" id="ed-equi" value="${d.equipo || ''}"></div>`;
            document.getElementById('up-foto-parche').value = "";
            document.getElementById('modalDatos').style.display = 'block';
        }

        async function guardarEdicion() {
            const file = document.getElementById('up-foto-parche').files[0];
            const up = { 
                transporte: document.getElementById('ed-trans').value, 
                cuit_trans: document.getElementById('ed-cuit').value, 
                chofer_nombre: document.getElementById('ed-nom').value, 
                chofer_cuil: document.getElementById('ed-cuil').value, 
                chasis: document.getElementById('ed-cha').value, 
                acoplado: document.getElementById('ed-aco').value, 
                equipo: document.getElementById('ed-equi').value 
            };

            if(file) {
                const reader = new FileReader();
                reader.onloadend = async () => {
                    const doc = await db.collection("reportes").doc(idEditando).get();
                    let pics = doc.data().fotos || [];
                    if(!Array.isArray(pics)) pics = [pics];
                    pics.push(reader.result);
                    up.fotos = pics;
                    await db.collection("reportes").doc(idEditando).update(up);
                    cerrarModales();
                };
                reader.readAsDataURL(file);
            } else {
                await db.collection("reportes").doc(idEditando).update(up);
                cerrarModales();
            }
        }

        function cargarChoferes() {
            db.collection("accesos_choferes").onSnapshot(snap => {
                const l = document.getElementById('lista-choferes-gestion'); l.innerHTML = "";
                snap.forEach(doc => {
                    const d = doc.data();
                    l.innerHTML += `<tr><td><b style="color:var(--naranja)">${doc.id.toUpperCase()}</b></td><td><code>${d.clave}</code></td><td>${d.telefono}</td><td><button class="btn-rojo" onclick="borrarChofer('${doc.id}')">ELIMINAR</button></td></tr>`;
                });
            });
        }

        async function guardarChofer() {
            const u = document.getElementById('u-nom').value.toLowerCase(), p = document.getElementById('u-pin').value, t = document.getElementById('u-tel').value;
            if(u && p && t) { await db.collection("accesos_choferes").doc(u).set({ clave: p, telefono: t }); }
            else { alert("Complete todos los campos"); }
        }

        async function pedirReenvio() {
            const cDoc = await db.collection("accesos_choferes").doc(actual.chofer).get();
            if(cDoc.exists) {
                const tel = cDoc.data().telefono, nom = actual.chofer_nombre, fec = actual.fecha;
                const msg = `Hola ${nom}, necesito que me reenv√≠es la imagen que me pasaste el ${fec}. Muchas gracias.`;
                window.open(`https://api.whatsapp.com/send?phone=${tel}&text=${encodeURIComponent(msg)}`, '_blank');
            } else { alert("No se encontr√≥ el tel√©fono"); }
        }

        function cerrarModales() { document.querySelectorAll('.modal').forEach(m => m.style.display = 'none'); }
        function toggleGestion() { const b = document.getElementById('box-gestion'); b.style.display = b.style.display==='none'?'block':'none'; }
        async function eliminarReporte(id) { if(confirm("¬øBorrar definitivamente?")) await db.collection("reportes").doc(id).delete(); }
        function cambiarEstado(id, n) { db.collection("reportes").doc(id).update({ estado: n }); }
        async function borrarChofer(id) { if(confirm("¬øEliminar acceso?")) await db.collection("accesos_choferes").doc(id).delete(); }

        function descargarPDF() {
            const { jsPDF } = window.jspdf;
            const pdf = new jsPDF('p', 'mm', 'a4');
            const imgs = document.querySelectorAll('.img-ticket-render');
            
            imgs.forEach((img, i) => {
                const canvas = document.createElement('canvas');
                const imgObj = new Image();
                imgObj.crossOrigin = "anonymous";
                imgObj.src = img.src;
                imgObj.onload = () => {
                    canvas.width = imgObj.width; canvas.height = imgObj.height;
                    const ctx = canvas.getContext('2d');
                    ctx.filter = img.style.filter;
                    ctx.drawImage(imgObj, 0, 0);
                    if(i > 0) pdf.addPage();
                    pdf.setFontSize(10);
                    pdf.text(`TICKET DE CARGA (${i+1}) - ${actual.transporte} - CHOFER: ${actual.chofer_nombre}`, 10, 10);
                    pdf.addImage(canvas.toDataURL('image/jpeg', 1.0), 'JPEG', 5, 15, 200, 275);
                    if(i === imgs.length - 1) pdf.save(`TICKET_${actual.chofer_nombre}.pdf`);
                };
            });
        }
    </script>
</body>
</html>












































































